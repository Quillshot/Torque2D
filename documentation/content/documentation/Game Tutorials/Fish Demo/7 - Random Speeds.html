<HTML>
   <HEAD><SCRIPT SRC="../../../include/tutorial.js" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT SRC="../../../include/prototype.js" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT SRC="../../../include/scriptaculous.js" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT SRC="../../../include/glossaryLookUp.js" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT SRC="../../../include/referenceLookUp.js" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT SRC="../../../include/component.js" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT SRC="../../../include/componentContainer.js" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT>DocImagePath = "../../../";</SCRIPT><link href="../../../include/tutorialStyles.css" rel="stylesheet" type="text/css" />
<link href="../../../include/tutorial.css" rel="stylesheet" type="text/css" />
<link href="../../../include/globalMainPageStyles.css" rel="stylesheet" type="text/css" />
<link href="../../../include/referenceThemeStyle.css" rel="stylesheet" type="text/css" />
<link href="../../../include/docTheme/theme.css" rel="stylesheet" type="text/css" />
<script>
   // this script chunk is to update the ToC to the current doc and expand it
   pageID = 22;
   parent.leftFrame.expandToItem('tree2', 'doc22');
   var element = parent.leftFrame.document.getElementById('doc22');
   if((element) && (element.className==parent.leftFrame.nodeClosedClass))
{
   element.className = parent.leftFrame.nodeOpenClass
}
;
</script>
      <TITLE>Torque 2D - Fish Demo Tutorial Part 7</TITLE>
      <META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=windows-1252">
      <META NAME="GENERATOR" CONTENT="Microsoft FrontPage 4.0">
      <META NAME="AUTHOR" CONTENT="User">
      <META NAME="CREATED" CONTENT="20050225;10000000">
      <META NAME="CHANGEDBY" CONTENT="Matt">
      <META NAME="CHANGED" CONTENT="20060728;13552300">
      <STYLE> <!-- @page { size: 8.5in 11in; margin-left: 1.25in; margin-right: 1.25in; margin-top: 0.5in; margin-bottom: 0.5in }
	P { margin-bottom: 0.08in; direction: ltr; color: #000000; text-align: left; widows: 2; orphans: 2 }
	P.western { font-family: "Times New Roman", serif; font-size: 12pt; so-language: en-US }
	P.cjk { font-family: "Times New Roman", serif; font-size: 12pt }
	P.ctl { font-family: "Times New Roman", serif; font-size: 12pt; so-language: ar-SA }
	TD P { margin-bottom: 0in; direction: ltr; color: #000000; text-align: left; widows: 2; orphans: 2 }
	TD P.western { font-family: "Times New Roman", serif; font-size: 12pt; so-language: en-US }
	TD P.cjk { font-family: "Times New Roman", serif; font-size: 12pt }
	TD P.ctl { font-family: "Times New Roman", serif; font-size: 12pt; so-language: ar-SA }
	A:link { color: #0000ff }
	--></STYLE>
   </HEAD>
   <BODY id = "BODYID" onLoad = "initComponent()"  LANG="en-US" TEXT="#000000" LINK="#0000ff" DIR="ltr" style="width: 700px; padding: 10px;">
      
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
      <DIV TYPE="HEADER">
         <P CLASS="western" ALIGN="center" STYLE="MARGIN-BOTTOM: 0.73in"><FONT FACE="Arial, sans-serif"><FONT SIZE="5" STYLE="FONT-SIZE: 16pt"><B>Torque 
                     2D - Fish Demo Tutorial - Part 7</B></FONT></FONT></P>
      </DIV>
      <P CLASS="western" ALIGN="justify" STYLE="MARGIN-BOTTOM: 0in"><BR>
      </P>
      <P CLASS="western" ALIGN="justify" STYLE="MARGIN-BOTTOM: 0in"><FONT FACE="Arial, sans-serif"><FONT SIZE="4" STYLE="FONT-SIZE: 16pt"><B>7. 
                  Random Speeds</B></FONT></FONT></P>
      <P class="western" style="MARGIN-BOTTOM: 0in" align="justify">&nbsp;</P>
      <P class="western" style="MARGIN-BOTTOM: 0in" align="justify"><H4><STRONG><FONT face="Arial">7.1 <FONT SIZE="3"><I>Setting 
                     up speed values in the Level Builder</I></FONT></FONT></STRONG></H4></P>
      <P CLASS="western" ALIGN="justify" STYLE="MARGIN-BOTTOM: 0in; FONT-STYLE: normal">
         <BR>
      </P>
      <P CLASS="western" ALIGN="justify" STYLE="MARGIN-BOTTOM: 0in; FONT-STYLE: normal">
         <FONT FACE="Arial, sans-serif"><FONT SIZE="2">Now our fish swims back and forth, and 
               comes in at a random position when it reaches the world limits. In this part we 
               are going to take it a step further. We will make it come in at random speeds. 
               Not only are we going to make it come in at random speeds, we are going to 
               define the min and max random speeds in the <I>Level Builder;</I> so you will 
               learn another level of integration between the <I>Level Builder</I> and script.  Utilizing this type of integration can be immensely useful when you begin to develop your games, this allows you to configure aspects of your game inside of the Level Builder.</FONT></FONT></P>
  
         
         <br><br>
         
         <FONT FACE="Arial, sans-serif"><FONT SIZE="2">Select the fish and
         add two <I>Dynamic Fields</I>: &quot;minSpeed&quot; with a value of &quot;5&quot; to give our fish a min speed value <I>(as shown in Figure 
                  7.1.2)</I> and also &quot;maxSpeed&quot; with a value of &quot;25&quot; <I>(as shown in Figure 7.1.3)</I>.&nbsp;
         Now our fish will have the <I>minSpeed</I>
               value of 5 and the <I>maxSpeed</I> value of 25 attached to it. So when we 
               access the fish in script we can reference these min and max values to get the 
               random speed. Save your level and open up your game.cs again (if you don't already have it open).</FONT></FONT>
      <P></P>
      <br>
         <table>
         <tr>
         <td>
            <P STYLE="MARGIN-TOP: 0.08in"><IMG SRC="images/FishDemoFigure7-1-1.jpg" NAME="graphics1" ALIGN="left"
                  BORDER="0"><BR CLEAR="left">
               <FONT SIZE="1"><I><B>Figure 7.1.1</B></I></FONT></P>
         </td><td width = "25">
         </td><td>
            <P STYLE="MARGIN-TOP: 0.08in"><IMG SRC="images/FishDemoFigure7-1-3.jpg" NAME="graphics3" ALIGN="left"
                  BORDER="0"><BR CLEAR="left">
               <FONT SIZE="1"><I><B>Figure 7.1.3</B></I></FONT></P>
         </td>
         </tr><tr>
         <td>   
            <P STYLE="MARGIN-TOP: 0.08in"><IMG SRC="images/FishDemoFigure7-1-2.jpg" NAME="graphics2" ALIGN="left"
                  BORDER="0"><BR CLEAR="left">
               <FONT SIZE="1"><I><B>Figure 7.1.2</B></I></FONT></P>
         </td>      
         </tr>  
         </table> 
      <br><br>
      <P CLASS="western" ALIGN="justify" STYLE="MARGIN-BOTTOM: 0in; FONT-STYLE: normal">
         <FONT FACE="Arial, sans-serif"><FONT SIZE="2">Add this function to the end 
               of the script file.</FONT></FONT></P>
      <P CLASS="western" ALIGN="justify" STYLE="MARGIN-BOTTOM: 0in; FONT-STYLE: normal">
         <BR>
      </P>
      <pre class = "code">
function FishClass::setSpeed(%this)
{
   %this.speed = getRandom(%this.minSpeed, %this.maxSpeed);
}
</pre>
      <P CLASS="western" ALIGN="justify" STYLE="MARGIN-BOTTOM: 0in"><FONT FACE="Arial, sans-serif"><FONT SIZE="1"><I><B>Code 
                     Sample 7.2.1</B></I></FONT></FONT></P>
      <P CLASS="western" ALIGN="justify" STYLE="MARGIN-BOTTOM: 0in; FONT-STYLE: normal">
         <BR>
      </P>
      <P CLASS="western" ALIGN="justify" STYLE="MARGIN-BOTTOM: 0in; FONT-STYLE: normal">
         <FONT FACE="Arial, sans-serif"><FONT SIZE="2">This function will get a random value 
               between the min and max we just specified in the <I>Level Builder</I>. It will 
               store this speed value on the fish object itself, that way we can reference it 
               when we set the fish's velocity. We need to now restructure our <I>onLevelLoaded()</I>
               function, as well as our <I>onWorldLimit()</I> function. So switch your 
               functions out with these.</FONT></FONT></P>
      <P CLASS="western" ALIGN="justify" STYLE="MARGIN-BOTTOM: 0in; FONT-STYLE: normal">
         <BR>
      </P>
      <P CLASS="western" ALIGN="justify" STYLE="MARGIN-BOTTOM: 0in; FONT-STYLE: normal">
         <BR>
      </P>
      <pre class = "code">
function FishClass::onLevelLoaded(%this, %scenegraph)
{
   %this.setSpeed();
   %this.setLinearVelocityX(%this.speed);
}


function FishClass::onWorldLimit(%this, %mode, %limit)
{
   %this.setSpeed();


   switch$ (%limit)
   {
      case &quot;left&quot;:
         %this.setLinearVelocityX(%this.speed);
         %this.setFlipX(false);
         %this.setPositionY(getRandom(-35, 25));


      case &quot;right&quot;:
         %this.setLinearVelocityX(-%this.speed);
         %this.setFlipX(true);
         %this.setPositionY(getRandom(-35, 25));
   }
}


      </pre>
      <P CLASS="western" STYLE="MARGIN-BOTTOM: 0in"><FONT SIZE="1"><I><B>Code Sample 7.2.2</B></I></FONT></P>
      <P CLASS="western" STYLE="MARGIN-BOTTOM: 0in; FONT-STYLE: normal">
         <BR>
      </P>
      <P CLASS="western" STYLE="MARGIN-BOTTOM: 0in; FONT-STYLE: normal">
         <FONT FACE="Arial, sans-serif"><FONT SIZE="2">There are a couple of things we 
               changed. First, we added a call to <I>setSpeed()</I> at the beginning of both 
               our functions. This will generate a new random speed each time we need to set 
               it. We also changed the <I>setLinearVelocityX()</I> call in <I>our onLevelLoaded() </I>
               function.<I> </I>It now uses our speed. As you can see, we changed the other 
               two <I>setLinearVelocityX()</I> calls in our <I>onWorldLimit()</I> function to 
               use the speed value as well. (Note that in the second call we still use a 
               negative speed value to ensure our fish goes left). </FONT></FONT>
      </P>
      <P CLASS="western" STYLE="MARGIN-BOTTOM: 0in; FONT-STYLE: normal">
         <BR>
      </P>
      <P CLASS="western" STYLE="MARGIN-BOTTOM: 0in; FONT-STYLE: normal">
         <FONT FACE="Arial, sans-serif"><FONT SIZE="2">Save your script file, open up <I>T2D</I>, 
               and play your level. You should see you fish swim in and out of the screen, and 
               each time it will have a random speed! <I>(As shown in Figure 7.2.1.)</I></FONT></FONT></P>
            <P STYLE="MARGIN-TOP: 0.08in"><IMG SRC="images/FishDemoFigure7-2-1.gif" NAME="graphics4"
                  ALIGN="left" BORDER="0"><BR CLEAR="left">
               <FONT SIZE="1"><I><B>Figure 7.2.1</B></I></FONT></P>
         <BR>
   <div class="footer">   <a href="../../../content_welcome.html" target="">Home</a>   <a href="#">Back to Top</a></div></body>
</HTML>
<br><font size = '2'><i>Document intended for Torque Game Builder version(s) 1.1 - 1.1.4.</i></font>